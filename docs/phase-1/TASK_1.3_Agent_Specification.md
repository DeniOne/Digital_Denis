# ğŸ¤– TASK 1.3 â€” Agent Model & Contracts

**ĞŸÑ€Ğ¾ĞµĞºÑ‚:** Digital Denis  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾  
**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹  
**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:** TASK 1.2

---

## ğŸ“‹ Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

- [x] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/base.py
- [x] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/core_agent.py
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/analyst_agent.py (v0.2)
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/operator_agent.py (v0.2)
- [x] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/memory_agent.py
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backend/agents/meta_analyst.py (v1.0)
- [x] Ğ’ÑĞµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ ÑĞ»ĞµĞ´ÑƒÑÑ‚ BaseAgent Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑƒ
- [ ] ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ unit-Ñ‚ĞµÑÑ‚Ñ‹ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

---

## ğŸ¯ Ğ¦ĞµĞ»ÑŒ

ĞĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ²ÑĞµÑ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²: Ñ€Ğ¾Ğ»Ğ¸, Ğ²Ñ…Ğ¾Ğ´Ñ‹, Ğ²Ñ‹Ñ…Ğ¾Ğ´Ñ‹, Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ğ¸ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼.

---

## ğŸ“¦ ĞÑ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ‹

### 1. ĞĞ±Ğ·Ğ¾Ñ€ Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AGENT LAYER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    SYNCHRONOUS AGENTS                          â”‚     â”‚
â”‚  â”‚           (ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ² Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğµ, Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ÑÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)         â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚     â”‚
â”‚  â”‚  â”‚   CORE   â”‚  â”‚ ANALYST  â”‚  â”‚ OPERATOR â”‚  â”‚  MEMORY  â”‚       â”‚     â”‚
â”‚  â”‚  â”‚  AGENT   â”‚  â”‚  AGENT   â”‚  â”‚  AGENT   â”‚  â”‚  AGENT   â”‚       â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                   ASYNCHRONOUS AGENTS                          â”‚     â”‚
â”‚  â”‚            (Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ² Ñ„Ğ¾Ğ½Ğµ, Ğ½Ğµ ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ² Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğµ)           â”‚     â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚     â”‚
â”‚  â”‚                    â”‚  META-ANALYST    â”‚                        â”‚     â”‚
â”‚  â”‚                    â”‚     AGENT        â”‚                        â”‚     â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Core Agent

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| **Ğ Ğ¾Ğ»ÑŒ** | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼Ñ‹ÑĞ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€. Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ, Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ. |
| **ĞšĞ¾Ğ³Ğ´Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ** | Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‚Ğ¸Ğ¿Ğ° `strategic`, Ğ¾Ğ±Ñ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¹ |
| **Ğ’Ñ…Ğ¾Ğ´Ñ‹** | `AgentContext` (ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ + Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ + Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ + ÑĞµÑÑĞ¸Ñ) |
| **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹** | `AgentResponse` (Ğ¾Ñ‚Ğ²ĞµÑ‚ + Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ_actions + metadata) |
| **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ** | Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¾ ÑĞ»ĞµĞ´ÑƒĞµÑ‚ Digital Profile. ĞĞµ Ğ´Ğ°Ñ‘Ñ‚ ÑĞ¾Ğ²ĞµÑ‚Ğ¾Ğ² "Ğ´Ğ»Ñ Ğ²Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ñ". |

**ĞŸÑ€Ğ¾Ğ¼Ñ‚-Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Core Agent:**
- Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹, Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ½Ğ¾-ÑĞ»ĞµĞ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ (ÑĞ¿Ğ¸ÑĞºĞ¸, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)
- ĞĞµ Ğ¿ĞµÑ€ĞµÑƒÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- Ğ£ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ½Ğ° Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¸ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ Ğ¼ÑĞ³ĞºĞ¾

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ…Ğ¾Ğ´Ğ°:**
```python
context = AgentContext(
    message="ĞšĞ°Ğº Ğ¼Ğ½Ğµ Ğ²Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²?",
    message_type="strategic",
    profile=denis_profile,
    relevant_memories=[...],
    ...
)
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°:**
```python
response = AgentResponse(
    content="## Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²\n\n### 1. Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹\n...",
    memory_actions=[
        MemoryAction(type="save", item_type="decision", content="...")
    ],
    metadata={"confidence": 0.85, "topics": ["hr", "motivation"]}
)
```

---

### 3. Analyst Agent

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| **Ğ Ğ¾Ğ»ÑŒ** | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ†Ğ¸Ñ„Ñ€, Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¹. Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·. |
| **ĞšĞ¾Ğ³Ğ´Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ** | Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‚Ğ¸Ğ¿Ğ° `analytical`, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ñ‡Ğ¸ÑĞ»Ğ°Ğ¼Ğ¸, Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ°Ğ¼Ğ¸ |
| **Ğ’Ñ…Ğ¾Ğ´Ñ‹** | `AgentContext` + Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ `data_attachments` |
| **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹** | `AgentResponse` Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°Ğ¼Ğ¸, Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°Ğ¼Ğ¸, Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°Ğ¼Ğ¸ |
| **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ** | ĞĞµ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ±ĞµĞ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…. Ğ¯Ğ²Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ½Ğ° Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ğº Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸. |

**Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°:**
- ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹
- Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑĞµÑ‚ Ñ„Ğ°ĞºÑ‚Ñ‹, Ğ´Ğ¾Ğ¿ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸:**
```
"ĞŸĞ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ğ¹, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ñ‹ Ñ‚ĞµÑ€ÑĞµĞ¼ Ğ½Ğ° ĞºĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ğ¸ 15% vs 20%"
"ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ·Ğ° ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»"
```

---

### 4. Operator Agent

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| **Ğ Ğ¾Ğ»ÑŒ** | ĞŸÑ€ĞµĞ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¹ Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ Ğ² ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ. ĞŸĞ»Ğ°Ğ½Ñ‹, Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ñ‡ĞµĞºĞ»Ğ¸ÑÑ‚Ñ‹. |
| **ĞšĞ¾Ğ³Ğ´Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ** | Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‚Ğ¸Ğ¿Ğ° `operational`, Ğ¿Ñ€Ğ¾ÑÑŒĞ±Ñ‹ Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ |
| **Ğ’Ñ…Ğ¾Ğ´Ñ‹** | `AgentContext` Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸ÑĞ¼Ğ¸/Ğ¸Ğ´ĞµÑĞ¼Ğ¸ Ğ´Ğ»Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹** | `AgentResponse` ÑĞ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ°Ğ¼Ğ¸ |
| **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ** | ĞĞµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸. Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ. |

**Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°:**
- Step-by-step Ğ¿Ğ»Ğ°Ğ½Ñ‹
- Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚Ñ‹ Ñ checkbox
- Timeline Ñ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸
- ĞœĞ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```
"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ¿Ğ»Ğ°Ğ½ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ KPI"
â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ñ ÑÑ‚Ğ°Ğ¿Ğ°Ğ¼Ğ¸, ÑÑ€Ğ¾ĞºĞ°Ğ¼Ğ¸, Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸
```

---

### 5. Memory Agent

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| **Ğ Ğ¾Ğ»ÑŒ** | Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ: Ğ¿Ğ¾Ğ¸ÑĞº, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ, Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ, ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ. |
| **ĞšĞ¾Ğ³Ğ´Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ** | Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‚Ğ¸Ğ¿Ğ° `reflexive`, Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¾ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğ¼ |
| **Ğ’Ñ…Ğ¾Ğ´Ñ‹** | `AgentContext` + `memory_query` |
| **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹** | `AgentResponse` + `MemoryOperations` |
| **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ** | ĞĞµ ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ±ĞµĞ· ÑĞ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ. |

**ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸:**
| ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ | Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|----------|---------|----------|
| `search` | "Ñ‡Ñ‚Ğ¾ Ñ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ» Ğ¾..." | Semantic search |
| `save` | ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ/Ğ¸Ğ½ÑĞ°Ğ¹Ñ‚ | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹ |
| `aggregate` | ĞœĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… items | ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ² summary |
| `forget` | Ğ¯Ğ²Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ + Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ |

---

### 6. Meta-Analyst Agent

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| **Ğ Ğ¾Ğ»ÑŒ** | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ñ. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾, Ğ½Ğµ ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ² Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğµ. |
| **ĞšĞ¾Ğ³Ğ´Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ** | ĞŸĞ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ, Ğ¿Ñ€Ğ¸ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¸ Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¹ |
| **Ğ’Ñ…Ğ¾Ğ´Ñ‹** | Ğ’ÑÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ + Ñ‚ĞµĞ¼Ñ‹ + Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ·Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ |
| **Ğ’Ñ‹Ñ…Ğ¾Ğ´Ñ‹** | ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹, Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¸, ÑĞ²ÑĞ·Ğ¸ (Ğ² CAL) |
| **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ** | ĞĞ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ. Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ğ² UI. |

**Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ‹:**
- Topic trends
- Decision quality reports
- Anomaly alerts
- Mind map updates

---

### 7. ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

```python
from abc import ABC, abstractmethod
from dataclasses import dataclass
from typing import List, Optional

@dataclass
class AgentContext:
    message: str
    message_type: str
    profile: DigitalProfile
    session: Session
    relevant_memories: List[MemoryItem]
    conversation_history: List[Message]
    metadata: dict

@dataclass
class MemoryAction:
    type: str  # save, aggregate, forget
    item_type: Optional[str]  # decision, insight, fact
    content: Optional[str]
    confidence: float = 0.0

@dataclass
class AgentResponse:
    content: str
    memory_actions: List[MemoryAction]
    metadata: dict  # confidence, topics, etc.
    needs_confirmation: bool = False
    suggested_agent: Optional[str] = None  # hand-off

class BaseAgent(ABC):
    def __init__(self, llm_provider: LLMProvider, profile: DigitalProfile):
        self.llm = llm_provider
        self.profile = profile
    
    @abstractmethod
    async def process(self, context: AgentContext) -> AgentResponse:
        """Process request and return response"""
        pass
    
    def build_prompt(self, context: AgentContext) -> str:
        """Build prompt with profile constraints"""
        pass
    
    def extract_memory_actions(self, response: str) -> List[MemoryAction]:
        """Identify what should be saved to memory"""
        pass
```

---

### 8. Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Orchestrator

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AGENT SELECTION FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Orchestrator â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Classify Message     â”‚
              â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
              â”‚   "strategic" â†’ Core   â”‚
              â”‚   "analytical" â†’ Analyst
              â”‚   "operational" â†’ Operator
              â”‚   "reflexive" â†’ Memory â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Build Context   â”‚    â”‚  Select Agent    â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
    â”‚  Profile         â”‚    â”‚  agent = Core()  â”‚
    â”‚  + Session       â”‚    â”‚                  â”‚
    â”‚  + Memories      â”‚    â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                       â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   agent.process()   â”‚
              â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
              â”‚   context â†’ response â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Handle Response    â”‚
              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
              â”‚  â€¢ Return to user   â”‚
              â”‚  â€¢ Execute memory   â”‚
              â”‚  â€¢ Trigger CAL      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 9. ĞœĞ°Ñ‚Ñ€Ğ¸Ñ†Ğ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

| ĞĞ³ĞµĞ½Ñ‚ | Sync | Ğ”Ğ¸Ğ°Ğ»Ğ¾Ğ³ | ĞŸĞ°Ğ¼ÑÑ‚ÑŒ Write | CAL Trigger |
|-------|------|--------|--------------|-------------|
| Core | âœ… | âœ… | âœ… | âœ… |
| Analyst | âœ… | âœ… | âœ… | âœ… |
| Operator | âœ… | âœ… | âœ… | âŒ |
| Memory | âœ… | âœ… | âœ… | âœ… |
| Meta-Analyst | âŒ | âŒ | âœ… | âœ… |

---

## âœ… ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ

- [x] Ğ’ÑĞµ 5 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ñ‹
- [x] Ğ’Ñ…Ğ¾Ğ´Ñ‹/Ğ²Ñ‹Ñ…Ğ¾Ğ´Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [x] ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ ÑĞ²Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ñ‹
- [x] Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾

---

## ğŸ“ Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

- [TASK 1.2 â€” Orchestrator Design](./TASK_1.2_Orchestrator_Design.md)
- [General Prompt](../../General%20Promt.md)
- [TASK 2.3 â€” Memory Agent Spec](../phase-2/TASK_2.3_Memory_Agent_Spec.md)
